"use strict";(self.webpackChunkapplication=self.webpackChunkapplication||[]).push([[606],{4606:(X,v,i)=>{i.r(v),i.d(v,{OrdersModule:()=>G});var d=i(6895),c=i(4006),g=i(4859),l=i(3546),_=i(9602),y=i(5412),f=i(1572),m=i(9549),C=i(7392),T=i(4144),A=i(1948),b=i(4385),s=i(7155),u=i(3060),t=i(4650),U=i(6568),O=i(529);let h=(()=>{class r{constructor(e){this.http=e,this.orders=[],this.baseUrl=`${localStorage.getItem("apiGatewayUrl")}`}fetch(){return this.http.get(`${this.baseUrl}/orders`)}get(e){return this.http.get(`${this.baseUrl}/order/${e}`)}create(e){return this.http.post(`${this.baseUrl}/order`,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(O.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function q(r,n){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Name is required"),t.qZA())}function P(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",13),t._uU(2),t.qZA(),t.TgZ(3,"div",14),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"div",15),t._uU(7),t.qZA(),t.TgZ(8,"div",15)(9,"button",16),t.NdJ("click",function(){const p=t.CHM(e).$implicit,Z=t.oxw();return t.KtG(Z.add(p))}),t.TgZ(10,"mat-icon"),t._uU(11,"add"),t.qZA()()(),t.TgZ(12,"div",15)(13,"button",17),t.NdJ("click",function(){const p=t.CHM(e).$implicit,Z=t.oxw();return t.KtG(Z.remove(p))}),t.TgZ(14,"mat-icon"),t._uU(15,"remove"),t.qZA()()()()}if(2&r){const e=n.$implicit;t.xp6(2),t.Oqu(e.product.name),t.xp6(2),t.Oqu(t.lcZ(5,3,e.product.price)),t.xp6(3),t.Oqu(e.quantity||0)}}function L(r,n){1&r&&(t.TgZ(0,"mat-card",18),t._UZ(1,"mat-progress-spinner",19),t.qZA())}const M=function(){return["/orders"]};let I=(()=>{class r{constructor(e,o,a,p){this.fb=e,this.productSvc=o,this.orderSvc=a,this.router=p,this.displayedColumns=[],this.orderProducts=[],this.isLoadingProducts=!0,this.error="",this.orderForm=this.fb.group({name:["",c.kI.required]})}ngOnInit(){this.productSvc.fetch().subscribe(e=>{this.orderProducts=e.map(o=>({product:o})),this.isLoadingProducts=!1}),this.orderForm=this.fb.group({orderName:["",c.kI.required]})}get name(){return this.orderForm.get("name")}get productQuantity(){return this.orderProducts.filter(e=>!!e.quantity).length>0}add(e){const o=this.orderProducts.find(a=>a?.product.productId===e.product.productId);this.orderProducts=this.orderProducts.map(a=>(a.product?.productId===o?.product?.productId&&(a={...o,quantity:o.quantity?o.quantity+1:1}),a))}remove(e){const o=this.orderProducts.find(a=>a?.product.productId===e.product.productId);this.orderProducts=this.orderProducts.map(a=>(a.product?.productId===o?.product?.productId&&(a={...o,quantity:o.quantity&&o.quantity>1?o.quantity-1:void 0}),a))}submit(){const e={...this.orderForm?.value,orderProducts:this.orderProducts.filter(o=>!!o.quantity).map(o=>({productId:o.product.productId,price:o.product.price,quantity:o.quantity}))};this.orderSvc.create(e).subscribe(()=>this.router.navigate(["orders"]))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.qu),t.Y36(U.M),t.Y36(h),t.Y36(u.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create"]],decls:22,vars:7,consts:[[1,"order-form","container"],[1,"row"],[1,"col-md-6"],[3,"formGroup","submit"],[1,"card"],["matInput","","placeholder","order name","formControlName","orderName","required",""],[4,"ngIf"],[1,"order-products"],["class","row",4,"ngFor","ngForOf"],["style","display: flex; justify-content: center; align-items: center",4,"ngIf"],[1,"button-panel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"routerLink"],[1,"col-6"],[1,"col-3"],[1,"col-1"],["mat-mini-fab","","color","primary","aria-label","Icon button with add icon",3,"click"],["mat-mini-fab","","color","warn","aria-label","Icon button with remove icon",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate","diameter","15"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("submit",function(){return o.submit()}),t.TgZ(4,"mat-card",4)(5,"mat-card-title"),t._uU(6,"Create new order"),t.qZA(),t.TgZ(7,"mat-card-content")(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Enter order name"),t.qZA(),t._UZ(11,"input",5),t.YNc(12,q,2,0,"mat-error",6),t.qZA(),t.TgZ(13,"div",7),t.YNc(14,P,16,5,"div",8),t.YNc(15,L,2,0,"mat-card",9),t.qZA(),t.TgZ(16,"mat-card-footer")(17,"div",10)(18,"button",11),t._uU(19," Submit "),t.qZA(),t.TgZ(20,"button",12),t._uU(21," Cancel "),t.qZA()()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.orderForm),t.xp6(9),t.Q6J("ngIf",null==o.name?null:o.name.invalid),t.xp6(2),t.Q6J("ngForOf",o.orderProducts),t.xp6(1),t.Q6J("ngIf",o.isLoadingProducts),t.xp6(3),t.Q6J("disabled",!o.orderForm.valid||!o.productQuantity),t.xp6(2),t.Q6J("routerLink",t.DdM(6,M)))},dependencies:[d.sg,d.O5,u.rH,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,g.lW,l.a8,l.dn,l.n5,l.rt,m.TO,m.KE,m.hX,C.Hw,T.Nt,f.Ou,d.H9],styles:[".order-form[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column}.mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:center}.button-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:8px}.row[_ngcontent-%COMP%]{width:100%;align-items:center}button[_ngcontent-%COMP%]{margin:4px}"]}),r})();var x=i(4004),w=i(3900);function N(r,n){if(1&r&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t._UZ(3,"br"),t.qZA(),t.TgZ(4,"td",22)(5,"span",23),t._uU(6),t.ALo(7,"currency"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"small",4),t._uU(10,"Before Tax"),t.qZA()(),t.TgZ(11,"td",22)(12,"span",23),t._uU(13),t.ALo(14,"currency"),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"small",4),t._uU(17),t.qZA()(),t.TgZ(18,"td",22)(19,"span",23),t._uU(20,"$0.00"),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"small",4),t._uU(23,"None"),t.qZA()(),t.TgZ(24,"td",24)(25,"span",23),t._uU(26),t.ALo(27,"currency"),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"small",4),t._uU(30,"Sales Tax 8.9%"),t.qZA()(),t.TgZ(31,"td",22)(32,"strong",23),t._uU(33),t.ALo(34,"currency"),t.qZA(),t._UZ(35,"br"),t.qZA()()),2&r){const e=n.$implicit,o=t.oxw();t.xp6(2),t.hij(" ",e.productId," "),t.xp6(4),t.Oqu(t.lcZ(7,6,e.price)),t.xp6(7),t.Oqu(t.lcZ(14,8,o.sum(e))),t.xp6(4),t.hij("",e.quantity," Units"),t.xp6(9),t.Oqu(t.lcZ(27,10,o.tax(e))),t.xp6(7),t.Oqu(t.lcZ(34,12,o.total(e)))}}function D(r,n){if(1&r&&(t.TgZ(0,"table",25)(1,"thead")(2,"tr")(3,"td",26),t._uU(4,"Sub Total"),t.qZA(),t.TgZ(5,"td",26),t._uU(6,"Discount"),t.qZA(),t.TgZ(7,"td",26),t._uU(8,"Total"),t.qZA(),t.TgZ(9,"td",26),t._uU(10,"Tax"),t.qZA(),t.TgZ(11,"td",26),t._uU(12,"Final"),t.qZA()()(),t.TgZ(13,"tbody")(14,"tr")(15,"th",27),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"th",27),t._uU(19,"-$0.00"),t.qZA(),t.TgZ(20,"th",27),t._uU(21),t.ALo(22,"currency"),t.qZA(),t.TgZ(23,"th",27),t._uU(24),t.ALo(25,"currency"),t.qZA(),t.TgZ(26,"th",27),t._uU(27),t.ALo(28,"currency"),t.qZA()()()()),2&r){const e=n.ngIf,o=t.oxw();t.xp6(16),t.hij(" ",t.lcZ(17,4,o.subTotal(e))," "),t.xp6(5),t.hij(" ",t.lcZ(22,6,o.subTotal(e))," "),t.xp6(3),t.hij(" ",t.lcZ(25,8,o.calcTax(e))," "),t.xp6(3),t.hij(" ",t.lcZ(28,10,o.final(e))," ")}}let F=(()=>{class r{constructor(e,o){this.route=e,this.orderSvc=o,this.taxRate=.0899}ngOnInit(){this.orderId$=this.route.params.pipe((0,x.U)(e=>e.orderId)),this.order$=this.orderId$.pipe((0,w.w)(e=>this.orderSvc.get(e))),this.orderProducts$=this.order$.pipe((0,x.U)(e=>e.orderProducts))}today(){return new Date}tenantName(){return""}sum(e){return e.price*e.quantity}tax(e){return this.sum(e)*this.taxRate}total(e){return this.sum(e)+this.tax(e)}subTotal(e){return e.orderProducts.map(o=>o.price*o.quantity).reduce((o,a)=>o+a)}calcTax(e){return this.subTotal(e)*this.taxRate}final(e){return this.subTotal(e)+this.calcTax(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.gz),t.Y36(h))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-detail"]],decls:62,vars:13,consts:[[1,"container","invoice"],[1,"invoice-header"],[1,"row"],[1,"col-xs-8"],[1,"text-muted"],[1,"col-xs-4"],[1,"media"],[1,"media-left"],["src","assets/logo.svg",1,"media-object","logo"],[1,"media-body","list-unstyled"],[1,"invoice-body"],[1,"card"],[1,"card-header"],[1,"table","table-bordered","table-responsive","no-bottom-margin"],[1,"text-center","colfix"],[4,"ngFor","ngForOf"],["class","table table-bordered table-condensed",4,"ngIf"],[1,"col-xs-7"],[1,"card-body"],[2,"margin","3px 0 5px"],[1,"invoice-footer"],[1,"nowrap"],[1,"text-right"],[1,"mono"],[1,"text-right","nowrap"],[1,"table","table-bordered","table-condensed"],[1,"text-center","col-xs-1"],[1,"text-center","rowtotal","mono"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),t._uU(5,"Order Details "),t.TgZ(6,"small"),t._uU(7,"mostly made up"),t.qZA()(),t.TgZ(8,"h5",4),t._uU(9),t.ALo(10,"async"),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"div",5)(13,"div",6)(14,"div",7),t._UZ(15,"img",8),t.qZA(),t.TgZ(16,"ul",9)(17,"li")(18,"strong"),t._uU(19),t.qZA()()()()()()(),t.TgZ(20,"div",10)(21,"div",2)(22,"div",11)(23,"div",12)(24,"h3"),t._uU(25,"Services / Products"),t.qZA()(),t.TgZ(26,"table",13)(27,"thead")(28,"tr")(29,"th"),t._uU(30,"Item / Details"),t.qZA(),t.TgZ(31,"th",14),t._uU(32,"Unit Cost"),t.qZA(),t.TgZ(33,"th",14),t._uU(34,"Sum Cost"),t.qZA(),t.TgZ(35,"th",14),t._uU(36,"Discount"),t.qZA(),t.TgZ(37,"th",14),t._uU(38,"Tax"),t.qZA(),t.TgZ(39,"th",14),t._uU(40,"Total"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,N,36,14,"tr",15),t.ALo(43,"async"),t.qZA()()(),t.TgZ(44,"div"),t.YNc(45,D,29,12,"table",16),t.ALo(46,"async"),t.qZA()(),t.TgZ(47,"div",2)(48,"div",17)(49,"div",11)(50,"div",18)(51,"i"),t._uU(52,"Comments / Notes"),t.qZA(),t._UZ(53,"hr",19),t._uU(54," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit repudiandae numquam sit facere blanditiis, quasi distinctio ipsam? Libero odit ex expedita, facere sunt, possimus consectetur dolore, nobis iure amet vero. "),t.qZA()()()(),t.TgZ(55,"div",20),t._uU(56," Thank you for choosing the Serverless SaaS Reference Architecture. "),t._UZ(57,"br"),t._uU(58," We hope to see you again soon "),t._UZ(59,"br"),t.TgZ(60,"strong"),t._uU(61,"AWS"),t.qZA()()()()),2&e&&(t.xp6(9),t.AsE(" NO: ",t.lcZ(10,5,o.orderId$)," | Date: ",t.lcZ(11,7,o.today())," "),t.xp6(10),t.Oqu(o.tenantName()),t.xp6(23),t.Q6J("ngForOf",t.lcZ(43,9,o.orderProducts$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(46,11,o.order$)))},dependencies:[d.sg,d.O5,d.Ov,d.H9,d.uU],styles:[".no-bottom-margin[_ngcontent-%COMP%]{margin-bottom:0}.nowrap[_ngcontent-%COMP%]{white-space:nowrap}.invoice[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;width:970px!important;margin:50px auto}.invoice[_ngcontent-%COMP%]   .invoice-header[_ngcontent-%COMP%]{padding:25px 25px 15px}.invoice[_ngcontent-%COMP%]   .invoice-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.invoice[_ngcontent-%COMP%]   .invoice-header[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{font-size:.9em;margin:0}.invoice[_ngcontent-%COMP%]   .invoice-body[_ngcontent-%COMP%]{border-radius:10px;padding:25px;background:#fff}.invoice[_ngcontent-%COMP%]   .invoice-footer[_ngcontent-%COMP%]{padding:15px;font-size:.9em;text-align:center;color:#999}.logo[_ngcontent-%COMP%]{max-height:70px;border-radius:10px}.dl-horizontal[_ngcontent-%COMP%]{margin:0}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{float:left;width:80px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{margin-left:90px}.rowamount[_ngcontent-%COMP%]{padding-top:15px!important}.rowtotal[_ngcontent-%COMP%]{font-size:1.3em}.colfix[_ngcontent-%COMP%]{width:12%}.mono[_ngcontent-%COMP%]{font-family:monospace}"]}),r})();function S(r,n){1&r&&(t.TgZ(0,"th",14),t._uU(1,"Name"),t.qZA())}function Y(r,n){if(1&r&&(t.TgZ(0,"td",15)(1,"a",16),t._uU(2),t.qZA()()),2&r){const e=n.$implicit;t.xp6(1),t.hYB("routerLink","/orders/detail/",e.shardId,":",e.orderId,""),t.xp6(1),t.hij(" ",e.orderName," ")}}function $(r,n){1&r&&(t.TgZ(0,"th",14),t._uU(1,"Line Items"),t.qZA())}function j(r,n){if(1&r&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e.orderProducts?null:e.orderProducts.length," ")}}function J(r,n){1&r&&(t.TgZ(0,"th",14),t._uU(1,"Total"),t.qZA())}function Q(r,n){if(1&r&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,o.sum(e))," ")}}function z(r,n){1&r&&t._UZ(0,"tr",17)}function H(r,n){1&r&&t._UZ(0,"tr",18)}function R(r,n){1&r&&(t.TgZ(0,"mat-card",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}const B=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",data:{title:"All Orders"},component:(()=>{class r{constructor(e,o){this.orderSvc=e,this.router=o,this.displayedColumns=["name","lineItems","total"],this.orderData=[],this.isLoading=!0}ngOnInit(){this.orderSvc.fetch().subscribe(e=>{this.isLoading=!1,this.orderData=e})}sum(e){return e.orderProducts.map(o=>o.price*o.quantity).reduce((o,a)=>o+a)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h),t.Y36(u.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list"]],decls:21,vars:4,consts:[[1,"order-list"],[1,"row"],[1,"col-md-6"],["mat-table","",1,"mat-elevation-z1",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lineItems"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","display: flex; justify-content: center; align-items: center",4,"ngIf"],[1,"button-panel"],["routerLink","/orders/create","routerLinkActive","router-link-active","mat-raised-button","","color","primary"],["mat-header-cell",""],["mat-cell",""],[1,"link",3,"routerLink"],["mat-header-row",""],["mat-row",""],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate","diameter","15"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Order List"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"table",3),t.ynx(6,4),t.YNc(7,S,2,0,"th",5),t.YNc(8,Y,3,3,"td",6),t.BQk(),t.ynx(9,7),t.YNc(10,$,2,0,"th",5),t.YNc(11,j,2,1,"td",6),t.BQk(),t.ynx(12,8),t.YNc(13,J,2,0,"th",5),t.YNc(14,Q,3,3,"td",6),t.BQk(),t.YNc(15,z,1,0,"tr",9),t.YNc(16,H,1,0,"tr",10),t.qZA(),t.YNc(17,R,2,0,"mat-card",11),t.TgZ(18,"div",12)(19,"button",13),t._uU(20," Create Order "),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("dataSource",o.orderData),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",o.isLoading))},dependencies:[d.O5,u.rH,u.yS,u.Od,g.lW,l.a8,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,f.Ou,d.H9],styles:[".order-list[_ngcontent-%COMP%]{margin:20px}table[_ngcontent-%COMP%]{width:100%}.button-panel[_ngcontent-%COMP%]{margin-top:20px}"]}),r})()},{path:"create",data:{title:"Create Order"},component:I},{path:"detail/:orderId",data:{title:"View Order Detail"},component:F}];let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.Bz.forChild(B),u.Bz]}),r})(),G=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[{provide:m.o2,useValue:{appearance:"outline"}}],imports:[d.ez,k,c.UX,g.ot,l.QW,_.FA,y.Is,m.lN,C.Ps,T.c,A.Fk,b.LD,s.p0,f.Cq]}),r})()}}]);