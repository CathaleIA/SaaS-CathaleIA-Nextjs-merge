{"ast":null,"code":"import _asyncToGenerator from \"/home/ec2-user/app/client/Application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Breakpoints } from '@angular/cdk/layout';\nimport { from, of } from 'rxjs';\nimport { filter, map, shareReplay } from 'rxjs/operators';\nimport { NavigationCancel, NavigationEnd, NavigationError, NavigationStart } from '@angular/router';\nimport { Auth } from 'aws-amplify';\nimport { navItems } from '../_nav';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/cdk/layout\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./../views/auth/auth-configuration.service\";\nimport * as i4 from \"@aws-amplify/ui-angular\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/list\";\nimport * as i9 from \"@angular/material/divider\";\nimport * as i10 from \"@angular/material/menu\";\nimport * as i11 from \"@angular/material/sidenav\";\nimport * as i12 from \"@angular/material/toolbar\";\n\nfunction NavComponent_ng_template_1_mat_list_item_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-list-item\")(1, \"mat-icon\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const navItem_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(navItem_r10.icon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"routerLink\", navItem_r10.url);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(navItem_r10.name);\n  }\n}\n\nfunction NavComponent_ng_template_1_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17)(1, \"mat-icon\", 13);\n    i0.ɵɵtext(2, \"lock_open\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction NavComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-sidenav-container\", 2)(1, \"mat-sidenav\", 3, 4);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementStart(6, \"div\", 5);\n    i0.ɵɵelement(7, \"mat-icon\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"mat-divider\");\n    i0.ɵɵelementStart(9, \"mat-nav-list\");\n    i0.ɵɵtemplate(10, NavComponent_ng_template_1_mat_list_item_10_Template, 5, 3, \"mat-list-item\", 7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-toolbar\", 8, 9)(13, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function NavComponent_ng_template_1_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r12);\n\n      const _r2 = i0.ɵɵreference(2);\n\n      return i0.ɵɵresetView(_r2.toggle());\n    });\n    i0.ɵɵelementStart(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"menu\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"span\", 11);\n    i0.ɵɵelementStart(20, \"button\", 12)(21, \"mat-icon\", 13);\n    i0.ɵɵtext(22, \"person_filled\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"mat-menu\", null, 14);\n    i0.ɵɵtemplate(25, NavComponent_ng_template_1_ng_template_25_Template, 5, 0, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(27, \"span\", 16);\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(30, \"mat-divider\");\n    i0.ɵɵelementStart(31, \"button\", 17)(32, \"mat-icon\", 13);\n    i0.ɵɵtext(33, \"face\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"span\");\n    i0.ɵɵtext(35, \"Profile\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"button\", 18)(37, \"mat-icon\", 13);\n    i0.ɵɵtext(38, \"construction\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"span\");\n    i0.ɵɵtext(40, \"Auth Debug\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function NavComponent_ng_template_1_Template_button_click_41_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.logout());\n    });\n    i0.ɵɵelementStart(42, \"mat-icon\", 13);\n    i0.ɵɵtext(43, \"logout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"span\");\n    i0.ɵɵtext(45, \"Sign Out\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(46, \"div\", 20, 21);\n    i0.ɵɵelement(48, \"router-outlet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"div\", 22, 23)(51, \"div\", 24)(52, \"span\");\n    i0.ɵɵtext(53, \"Serverless SaaS Workshop \\u00A9 2022 AWS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(54, \"span\", 11);\n    i0.ɵɵelementStart(55, \"span\");\n    i0.ɵɵtext(56, \" Powered by \");\n    i0.ɵɵelementStart(57, \"a\", 25);\n    i0.ɵɵtext(58, \"SaaS Factory\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const user_r1 = ctx.user;\n\n    const _r5 = i0.ɵɵreference(24);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"mode\", \"side\")(\"mode\", i0.ɵɵpipeBind1(4, 10, ctx_r0.isHandset$) ? \"over\" : \"side\")(\"opened\", i0.ɵɵpipeBind1(5, 12, ctx_r0.isHandset$) === false);\n    i0.ɵɵattribute(\"role\", i0.ɵɵpipeBind1(3, 8, ctx_r0.isHandset$) ? \"dialog\" : \"navigation\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.navItems);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 14, ctx_r0.companyName$) || \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r5);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 16, ctx_r0.username$) || user_r1.username);\n  }\n}\n\nexport let NavComponent = /*#__PURE__*/(() => {\n  class NavComponent {\n    constructor(breakpointObserver, router, authConfigService) {\n      this.breakpointObserver = breakpointObserver;\n      this.router = router;\n      this.authConfigService = authConfigService;\n      this.loading$ = of(false);\n      this.navItems = navItems;\n      this.isHandset$ = this.breakpointObserver.observe(Breakpoints.Handset).pipe(map(result => result.matches), shareReplay()); // this.configSvc.loadConfigurations().subscribe((val) => console.log(val));\n\n      this.loading$ = this.router.events.pipe(filter(e => e instanceof NavigationStart || e instanceof NavigationEnd || e instanceof NavigationCancel || e instanceof NavigationError), map(e => e instanceof NavigationStart));\n    }\n\n    ngOnInit() {\n      try {\n        const s = Auth.currentSession().catch(err => {\n          console.log('Failed to get current session. Err: ', err);\n          return err;\n        });\n        const session$ = from(s);\n        this.isAuthenticated$ = session$.pipe(filter(sesh => !!sesh), map(sesh => sesh && typeof sesh.isValid === 'function' && sesh.isValid()));\n        const token$ = session$.pipe(map(sesh => sesh && typeof sesh.getIdToken === 'function' && sesh.getIdToken()));\n        this.username$ = token$.pipe(map(t => t && t.payload && t.payload['cognito:username']));\n        this.companyName$ = token$.pipe(map(t => t.payload && t.payload['custom:company-name']));\n      } catch (err) {\n        console.error('Unable to get current session.');\n      }\n    }\n\n    logout() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        yield Auth.signOut({\n          global: true\n        }).then(e => {\n          _this.authConfigService.cleanLocalStorage();\n\n          _this.router.navigate(['/unauthorized']);\n        }).catch(err => {\n          console.error('Error logging out: ', err);\n        });\n      })();\n    }\n\n  }\n\n  NavComponent.ɵfac = function NavComponent_Factory(t) {\n    return new (t || NavComponent)(i0.ɵɵdirectiveInject(i1.BreakpointObserver), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthConfigurationService));\n  };\n\n  NavComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NavComponent,\n    selectors: [[\"app-nav\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[3, \"hideSignUp\"], [\"amplifySlot\", \"authenticated\"], [\"fullscreen\", \"\"], [\"fixedInViewport\", \"\", 1, \"sidenav\", 3, \"mode\", \"opened\"], [\"drawer\", \"\"], [1, \"sidebar-icon-container\"], [\"svgIcon\", \"saas-commerce\", 1, \"logo\"], [4, \"ngFor\", \"ngForOf\"], [1, \"sidenav-content-container\"], [\"toolbar\", \"\"], [\"type\", \"button\", \"mat-icon-button\", \"\", \"title\", \"Open sidenav\", 3, \"click\"], [1, \"spacer\"], [\"mat-icon-button\", \"\", \"aria-label\", \"account circle with outlined person icon\", 3, \"matMenuTriggerFor\"], [1, \"material-symbols-outlined\"], [\"useroptions\", \"matMenu\"], [\"loggedOut\", \"\"], [2, \"margin\", \"8px\"], [\"mat-menu-item\", \"\"], [\"routerLink\", \"/auth/info\", \"mat-menu-item\", \"\"], [\"mat-menu-item\", \"\", 3, \"click\"], [1, \"content\"], [\"main\", \"\"], [1, \"footer\"], [\"footer\", \"\"], [1, \"footer-text\"], [\"href\", \"https://aws.amazon.com\"], [\"mat-list-icon\", \"\", 1, \"nav-icon\", \"material-symbols-outlined\"], [\"mat-list-item\", \"\", 3, \"routerLink\"]],\n    template: function NavComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"amplify-authenticator\", 0);\n        i0.ɵɵtemplate(1, NavComponent_ng_template_1_Template, 59, 18, \"ng-template\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"hideSignUp\", true);\n      }\n    },\n    dependencies: [i4.AmplifySlotDirective, i4.AuthenticatorComponent, i2.RouterOutlet, i2.RouterLink, i2.RouterLinkWithHref, i5.NgForOf, i6.MatButton, i7.MatIcon, i8.MatNavList, i8.MatListItem, i8.MatListIconCssMatStyler, i9.MatDivider, i10.MatMenu, i10.MatMenuItem, i10.MatMenuTrigger, i11.MatSidenav, i11.MatSidenavContainer, i12.MatToolbar, i5.AsyncPipe],\n    styles: [\".sidenav[_ngcontent-%COMP%]{width:200px;background-color:#2f353a}.mat-list-item[_ngcontent-%COMP%]{color:#f5f5f5}.sidebar-icon-container[_ngcontent-%COMP%]{height:64px;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:\\\"FILL\\\" 0,\\\"wght\\\" 400,\\\"GRAD\\\" 0,\\\"opsz\\\" 48}.logo[_ngcontent-%COMP%]{width:100px;height:auto}.nav-icon[_ngcontent-%COMP%]{color:#20a8d8}.footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:40px;background-color:#f5f5f5;color:#2d3337;margin:0}.footer-text[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{position:absolute;width:100%;height:90%;max-height:90%;overflow:auto;background-color:#d3d3d3}\"]\n  });\n  return NavComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}